<!DOCTYPE html>
<html lang="fr" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WikiFlow_Terminal</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        background: '#0d1117', /* GitHub Dark Dimmed */
                        sidebar: '#161b22',
                        card: '#0d1117',
                        border: '#30363d',
                        primary: '#58a6ff', /* GitHub Blue */
                        success: '#238636',
                        danger: '#da3633',
                        warning: '#d29922',
                        text: '#c9d1d9',
                        muted: '#8b949e'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    boxShadow: {
                        'neon': '0 0 5px rgba(88, 166, 255, 0.3)',
                    }
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css">

    {% block head %}{% endblock %}
</head>

<body class="bg-background text-text font-sans h-screen flex overflow-hidden selection:bg-primary selection:text-white">

    <!-- Sidebar: "Project Explorer" Style -->
    <aside class="w-64 bg-sidebar border-r border-border flex flex-col font-mono text-sm">
        <div class="h-12 flex items-center px-4 border-b border-border bg-[#010409]">
            <span class="text-success mr-2">âžœ</span>
            <span class="font-bold tracking-tight text-white">~/wiki_flow</span>
        </div>

        <nav class="flex-1 py-4 space-y-1">
            <div class="px-4 text-xs font-bold text-muted uppercase tracking-wider mb-2">EXPLORER</div>

            <a href="/dashboard"
                class="group flex items-center px-4 py-1.5 hover:bg-[#21262d] transition-colors {% if request.url.path == '/dashboard' %}bg-[#21262d] text-primary border-l-2 border-primary{% else %}border-l-2 border-transparent{% endif %}">
                <i class="fas fa-terminal w-5 text-center mr-2 opacity-70 group-hover:opacity-100"></i>
                dashboard.sh
            </a>
            <a href="/calendar"
                class="group flex items-center px-4 py-1.5 hover:bg-[#21262d] transition-colors {% if request.url.path == '/calendar' %}bg-[#21262d] text-primary border-l-2 border-primary{% else %}border-l-2 border-transparent{% endif %}">
                <i class="fas fa-calendar-alt w-5 text-center mr-2 opacity-70 group-hover:opacity-100"></i>
                calendar.py
            </a>
            <a href="/settings"
                class="group flex items-center px-4 py-1.5 hover:bg-[#21262d] transition-colors {% if request.url.path == '/settings' %}bg-[#21262d] text-primary border-l-2 border-primary{% else %}border-l-2 border-transparent{% endif %}">
                <i class="fas fa-cogs w-5 text-center mr-2 opacity-70 group-hover:opacity-100"></i>
                config.json
            </a>
            <a href="/storage"
                class="group flex items-center px-4 py-1.5 hover:bg-[#21262d] transition-colors {% if request.url.path == '/storage' %}bg-[#21262d] text-primary border-l-2 border-primary{% else %}border-l-2 border-transparent{% endif %}">
                <i class="fas fa-hdd w-5 text-center mr-2 opacity-70 group-hover:opacity-100"></i>
                /mnt/storage
            </a>
        </nav>

        <div class="p-4 border-t border-border bg-[#010409]">
            <div class="flex items-center">
                <div
                    class="w-8 h-8 rounded bg-primary/20 flex items-center justify-center text-primary font-mono font-bold border border-primary/30">
                    {{ user.username[0].upper() if user else 'U' }}
                </div>
                <div class="ml-3 truncate">
                    <p class="text-xs font-bold text-white font-mono">user: {{ user.username if user else 'guest' }}</p>
                    <p class="text-[10px] text-muted uppercase">role: {{ user.role.value if user else 'none' }}</p>
                </div>
                <a href="/logout" class="ml-auto text-muted hover:text-danger transition-colors" title="Logout">
                    <i class="fas fa-power-off"></i>
                </a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col min-w-0 overflow-hidden bg-background relative">
        <!-- Top Status Bar (Fake IDE tabs/Breadcrumbs) -->
        <header
            class="h-8 bg-sidebar border-b border-border flex items-center px-4 text-xs font-mono text-muted select-none">
            <span class="mr-2">root@wikiflow:</span>
            <span class="text-primary">{{ request.url.path }}</span>
            <span class="ml-auto flex items-center space-x-3">
                <span class="flex items-center">
                    <div class="w-2 h-2 rounded-full bg-success mr-1"></div> Online
                </span>
                <span>v1.0.0</span>
            </span>
        </header>

        <div class="flex-1 overflow-auto p-0 scroll-smooth">
            {% block content %}{% endblock %}
        </div>
    </main>

    {% block scripts %}{% endblock %}
</body>

</html>